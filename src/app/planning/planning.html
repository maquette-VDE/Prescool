<div class="row align-items-center g-3">
  <div class="col-12 col-md-auto">
    <div class="title-section">
      <h2 class="fw-bold mb-0 h4 h2-md">La liste de présence</h2>
      <p class="text-muted small mb-0 d-none d-sm-block">
        Consultez la présence des consultants
      </p>
    </div>
  </div>

  <div class="col-12 col-md px-md-5 order-3 order-md-2">
    <div class="search-section w-100" style="max-width: 500px; margin: 0 auto">
      <div class="input-group search-bar rounded-pill shadow-sm overflow-hidden border">
        <span class="input-group-text bg-light border-0 ps-3">
          <i class="bi bi-search text-muted"></i>
        </span>
        <input type="text" class="form-control bg-light border-0 py-2 shadow-none"
          placeholder="Rechercher un consultant" (input)="onSearchChange($event)" />
      </div>
    </div>
  </div>

  <div class="col-auto col-md-auto ms-auto order-2 order-md-3">
    <div class="profile-section d-flex align-items-center gap-2 gap-md-3">
      <button class="btn btn-light rounded-circle p-2 border shadow-sm position-relative">
        <i class="bi bi-bell fs-5"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
          style="font-size: 0.5rem;">
        </span>
      </button>

      <div
        class="user-pill d-flex align-items-center border rounded-pill p-1 pe-2 pe-md-3 shadow-sm bg-white cursor-pointer">
        <div class="rounded-circle d-flex align-items-center justify-content-center me-md-2 bg-dark text-white fw-bold"
          style="
              width: 35px;
              height: 35px;
              font-size: 0.8rem;
              border: 1px solid #333;
              flex-shrink: 0;
            ">
          {{ userInitials }}
        </div>
        <div class="d-none d-md-flex flex-column me-2 text-end">
          <span class="fw-bold" style="font-size: 0.85rem; line-height: 1">{{ currentUser.first_name }}</span>
          <span class="text-muted" style="font-size: 0.65rem">Expert</span>
        </div>

        <c-dropdown placement="bottom-end">
          <i cDropdownToggle class="bi bi-chevron-down small text-muted d-none d-sm-block  no-caret"
            style="cursor: pointer; padding: 5px;">
          </i>

          <ul cDropdownMenu class="pt-0 shadow border-0" style="width:200px; height:auto; min-height:200px">
            <li class="d-flex flex-column align-items-center justify-content-center p-3 text-center">

              <div
                class="rounded-circle d-flex align-items-center justify-content-center bg-white text-dark fw-bold shadow-sm mb-2"
                style="width: 50px; height: 50px; font-size: 0.8rem; border: 1px solid #dee2e6; flex-shrink: 0;">
                {{ userInitials }}
              </div>

              <div class="fw-bold text-dark" style="font-size: 0.9rem;">{{ currentUser.first_name }}</div>
              <div class="text-muted mb-3" style="font-size: 0.75rem;">{{ currentUser.email }}</div>

              <button (mousedown)="toggleCreateModal()" cButton color="info" variant="outline" class="btn-xs-custom">
                Modifier mon profil
              </button>

            </li>
          </ul>
        </c-dropdown>
      </div>
    </div>
  </div>
</div>


<div class="container-fluid my-3 px-3">
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
    <div class="d-flex align-items-center">
      <div class="bg-light rounded-3 text-center p-2 me-3" style="min-width: 45px">
        <div class="text-uppercase text-muted" style="font-size: 0.6rem; font-weight: 700">
          {{ translateDateToFr(today, "MMM") }}
        </div>
        <div class="fw-bold fs-5 text-dark" style="line-height: 1">
          {{ translateDateToFr(today, "dd") }}
        </div>
      </div>
      <div class="d-flex flex-column">
        <span class="fw-bold text-dark small">{{
          translateDateToFr(today, "d MMMM yyyy")
          }}</span>
        <span class="text-muted d-none d-sm-inline" style="font-size: 0.7rem">{{
          weekRangeLabel
          }}</span>
      </div>
    </div>

    <div
      class="week-selector d-flex align-items-center bg-black text-white rounded-pill px-3 py-1 py-md-2 mx-auto mx-md-0">
      <button (click)="changeWeek(-1)" class="btn btn-link text-white p-0 me-3 shadow-none">
        <i class="bi bi-chevron-left"></i>
      </button>
      <span class="fw-medium text-nowrap" style="font-size: 0.85rem; min-width: 100px; text-align: center">
        {{ weekRangeLabel }}
      </span>
      <button (click)="changeWeek(1)" class="btn btn-link text-white p-0 ms-3 shadow-none">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
<daypilot-scheduler [config]="config()" #scheduler></daypilot-scheduler>

<!----------------------------------la version experimentale----------------------------->

<c-modal id="createClientModal" [visible]="visibleCreate" (visibleChange)="visibleCreate = $event"
  alignment="center" >

  <c-modal-header class="border-0 bg-white py-3 d-flex align-items-center position-relative">

    <h5 cModalTitle class="fw-bold m-0 flex-grow-1" style="margin-right: 80px !important;">
      Modifier mon profil
    </h5>
    
    <button type="button" (click)="toggleCreateModal()" class="btn-back-minimal border-0 bg-transparent">
      <span class="chevron-left"></span>
      Retour
    </button>

    
  </c-modal-header>

  <c-modal-body class="p-4 bg-white">
    <form class="row g-3">

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Prénom</label>
        <input cFormControl [(ngModel)]="currentUser.first_name" name="first_name" placeholder="Ex: Jean"
          class="border-0 shadow-sm form-control-sm" style="background:#FFFFFF;" />
      </div>

      <div class="col-md-6 mb-3">
        <label cLabel class="form-label fw-semibold mb-1 d-block">Nom</label>

        <input cFormControl [(ngModel)]="currentUser.last_name" name="last_name" placeholder="Ex: Dupont"
          class="border-0 shadow-sm form-control-sm w-100 custom-input-style" />
      </div>

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Email</label>
        <input cFormControl [(ngModel)]="currentUser.email" name="email" type="email" placeholder="exemple@mail.com"
          class="border-0 shadow-sm form-control-sm" />
      </div>

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Téléphone</label>
        <input cFormControl [(ngModel)]="currentUser.phone_number" name="phone_number" placeholder="Ex: +33..."
          class="border-0 shadow-sm form-control-sm" />
      </div>

      <div class="col-12">
        <label cLabel class="form-label fw-semibold mb-1">Nouveau mot de passe</label>
        <input cFormControl [(ngModel)]="currentUser.password" name="password" type="password"
          placeholder="Laisser vide pour ne pas modifier" class="border-primary shadow-sm form-control-sm" />
      </div>
    </form>
  </c-modal-body>

  <c-modal-footer class="border-0 pb-4 bg-white d-flex justify-content-center gap-3">
    <button (click)="saveProfile()" cButton class="btn-gradient-custom px-5 shadow-sm fw-bold " style="width: 571px; height: 38px;">
      Enregistrer les modifications
    </button>
  </c-modal-footer>
</c-modal>



<!-------------------------Modal Modification de Profile-------------------------

<c-modal id="createClientModal" [visible]="visibleCreate" (visibleChange)="visibleCreate = $event"
  alignment="center" >

  <c-modal-header class="border-0 bg-white py-3 d-flex align-items-center position-relative">

    <h5 cModalTitle class="fw-bold m-0 flex-grow-1" style="margin-right: 80px !important;">
      Modifier mon profil
    </h5>
    
    <button type="button" (click)="toggleCreateModal()" class="btn-back-minimal border-0 bg-transparent">
      <span class="chevron-left"></span>
      Retour
    </button>

    
  </c-modal-header>

  <c-modal-body class="p-4 bg-white">
    <form class="row g-3">

      <div class="col-12 d-flex flex-column align-items-center mb-3">
        <div class="avatar-gradient shadow-sm mb-2" style="width: 130px; height: 130px; overflow: hidden;">
          <img
            [src]="imagePreview ? imagePreview : 'https://ui-avatars.com/api/?name=' + userInitials + '&background=transparent&color=fff'"
            class="w-100 h-100 object-fit-cover">
        </div>
        <div class="w-100 text-center">
          <label cLabel class="fw-bold text-primary small mb-2 d-block">Photo de profil</label>
          <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*"
            class="form-control form-control-sm border-0 shadow-sm mx-auto" style="max-width: 250px;">
        </div>
      </div>

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Prénom</label>
        <input cFormControl [(ngModel)]="currentUser.first_name" name="first_name" placeholder="Ex: Jean"
          class="border-0 shadow-sm form-control-sm" style="background:#FFFFFF;" />
      </div>

      <div class="col-md-6 mb-3">
        <label cLabel class="form-label fw-semibold mb-1 d-block">Nom</label>

        <input cFormControl [(ngModel)]="currentUser.last_name" name="last_name" placeholder="Ex: Dupont"
          class="border-0 shadow-sm form-control-sm w-100 custom-input-style" />
      </div>

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Email</label>
        <input cFormControl [(ngModel)]="currentUser.email" name="email" type="email" placeholder="exemple@mail.com"
          class="border-0 shadow-sm form-control-sm" />
      </div>

      <div class="col-md-6">
        <label cLabel class="form-label fw-semibold mb-1">Téléphone</label>
        <input cFormControl [(ngModel)]="currentUser.phone_number" name="phone_number" placeholder="Ex: +33..."
          class="border-0 shadow-sm form-control-sm" />
      </div>

      <div class="col-12">
        <label cLabel class="form-label fw-semibold mb-1">Nouveau mot de passe</label>
        <input cFormControl [(ngModel)]="currentUser.password" name="password" type="password"
          placeholder="Laisser vide pour ne pas modifier" class="border-primary shadow-sm form-control-sm" />
      </div-->
    <!--/form>
  </c-modal-body>

  <c-modal-footer class="border-0 pb-4 bg-white d-flex justify-content-center gap-3">
    <button (click)="saveProfile(fileInput)" cButton class="btn-gradient-custom px-5 shadow-sm fw-bold " style="width: 571px; height: 38px;">
      Enregistrer les modifications
    </button>
  </c-modal-footer>
</c-modal-->